---
import FeedLayout from "../../layouts/Feed.astro";
import { getAllCheeps, getGuestbook } from '../../constants/queries.js'
import { ROUTES } from '../../constants/routes.js'

const { PAGINATION_SIZE } = import.meta.env
const pageSize = parseInt(PAGINATION_SIZE, 10)

const allCheeps = await getAllCheeps()
const allEntries = await getGuestbook()

console.info(allEntries)

const page = {
  posts: allCheeps.slice(0, pageSize),
  currentPage: 1,
  totalPages: Math.ceil(allCheeps.length / pageSize),
  route: ROUTES.guestbook.href,
}
---
<FeedLayout
  title="Guestbook"
  description="Jhey's guestbook. Come sign it!"
  ogtitle="Guestbook"
  oggradient="7"
  page={page}
/>