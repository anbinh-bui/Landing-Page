---
import FeedLayout from "../../layouts/Feed.astro";
import { getAllCheeps } from '../../constants/queries.js'
import { ROUTES } from '../../constants/routes.js'

const { PAGINATION_SIZE } = import.meta.env
const pageSize = parseInt(PAGINATION_SIZE, 10)

const allCheeps = await getAllCheeps()

const page = {
  posts: allCheeps.slice(0, pageSize),
  currentPage: 1,
  totalPages: Math.ceil(allCheeps.length / pageSize),
  route: ROUTES.posts.href
}
---
<FeedLayout
  title="The Feed"
  description="Thoughts and creations from the mind of Jhey Tompkins"
  ogtitle="Posts from Jhey Tompkins"
  oggradient="2"
  page={page}
/>